angular.module("myProject",["firebase","ui.router"]).directive("headerDirective",function(){return{templateUrl:"my_template/header.html"}}).directive("footerDirective",function(){return{templateUrl:"my_template/footer.html"}}).directive("productDirective",[function(){return{restrict:"AE",templateUrl:"my_template/product.html"}}]).directive("detailDirective",[function(){return{restrict:"AE",templateUrl:"my_template/productdetail.html"}}]).config(function(t,e){e.otherwise("/home"),t.state("home",{url:"/home",templateUrl:"my_template/home.html"}).state("product",{url:"/product/:type",templateUrl:"my_template/product.html",controller:"ProductCtrl"}).state("detail",{url:"/detail/:code",templateUrl:"my_template/productdetail.html",controller:"DetailProductCtrl"}).state("search-product",{url:"/search-product/:name",templateUrl:"my_template/productsearch.html",controller:"SearchProductCtrl"}).state("cart",{url:"/cart",templateUrl:"my_template/cartproduct.html"}).state("img",{url:"/img/:img",controller:"ImageCtrl"})}).filter("Paging",function(){return function(t,e){return e=+e,t.slice(e)}}).controller("ProductCtrl",["$scope","$firebaseArray","$stateParams",function(t,e,r){var a=new Firebase("https://finalassignment.firebaseio.com/product"),o=r.type;t.data=e(a.orderByChild("type").equalTo(o)),t.nowPage=0,t.sizePage=8,t.totalPage=function(){return Math.ceil(t.data.length/t.sizePage)}}]).controller("SearchProductCtrl",["$scope","$firebaseArray","$stateParams",function(t,e,r){var a=new Firebase("https://finalassignment.firebaseio.com/product");t.name=r.name,t.data=e(a)}]).controller("DetailProductCtrl",["$scope","$firebaseArray","$stateParams",function(t,e,r){var a=new Firebase("https://finalassignment.firebaseio.com/product"),o=r.code;t.data=e(a.orderByChild("code").equalTo(o))}]).controller("homeController",["$scope","$firebaseArray",function(t,e){t.numcart=0,t.shopcart=[],t.user={},t.delProductItem=function(e){var r=confirm("Do you want to delete this product?");1==r&&(t.shopcart.splice(t.shopcart.indexOf(e),1),t.numcart=t.numcart-1)},t.addProductItem=function(e){if(t.shopcart.indexOf(e)<0){var r=!0;e.quantity=1;for(var a=0;a<t.shopcart.length;a++)e.code==t.shopcart[a].code&&(r=!1);r?(t.shopcart.push(e),t.numcart=t.numcart+1,window.alert("Added this product into your cart")):window.alert("This product that contained in your cart")}},t.addCartToFirebase=function(){var r=new Firebase("https://finalassignment.firebaseio.com/cart/post");t.postsRef=e(r),t.quantity=t.shopcart,t.user.item=t.shopcart;var a=confirm("Do you want to order these products?");1==a&&(t.postsRef.$add(t.user),t.user=null,t.shopcart=null,t.numcart=0,window.alert("Thank you to order our products! We will contact to you as soon as possible to confirm your order!"))},t.getTotal=function(t){var e=0;return angular.forEach(t,function(t){e+=parseInt(t.price)*parseInt(t.quantity)}),e}}]);